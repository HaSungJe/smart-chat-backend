# Redis 설정 파일

# 네트워크
bind 0.0.0.0
port 6379
tcp-backlog 511

# 일반 설정
daemonize no
supervised no
pidfile /var/run/redis_6379.pid
loglevel notice
logfile ""

# 데이터 영속성 (AOF)
appendonly yes
appendfilename "appendonly.aof"
appendfsync everysec

# 데이터 영속성 (RDB)
save 900 1      # 900초(15분) 동안 1개 이상 변경시 저장
save 300 10     # 300초(5분) 동안 10개 이상 변경시 저장
save 60 10000   # 60초(1분) 동안 10000개 이상 변경시 저장

dbfilename dump.rdb
dir /data

# 메모리 관리
maxmemory 256mb
maxmemory-policy allkeys-lru

# 보안 (개발 환경이므로 주석 처리)
# requirepass your_password_here

# 클라이언트 연결
timeout 300
tcp-keepalive 300
maxclients 10000

# 성능 최적화
databases 16
stop-writes-on-bgsave-error yes
rdbcompression yes
rdbchecksum yes

# 느린 쿼리 로그
slowlog-log-slower-than 10000
slowlog-max-len 128